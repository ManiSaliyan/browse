const fetch = require("node-fetch"); // Only needed in Node.js environments

const endpoint = "https://production-sfo.browserless.io/chrome/bql";
const token = "2SmMY2zCq0NyNvx935a5ce89baf853bf72ee9cd7eb17c65c7";
const proxyString = "&proxy=residential";
const optionsString = "&blockConsentModals=true";
const addresses = ["0xBfe29717877cB8a28F43224BEE5eF321a2933Ccc","0xdE2841D8D3eE26DCe07991F13abC4dda6e7A148c","0xE52E41ee477Dd52f828102ebEb02e2d6ADCf75ac","0xA8EDc5035d97B7154b7110224958ac93828ABcD8","0xa0B2cefe64F30066c4B3A3b8Bd9821a1cb9C0aEA","0x62D60c9bb92115ef44E76EF028F806103959C9C1","0xd8ccD70D9c6e21705f34855242219878cBA1E86D","0xDdF1Eab52E7677afd039688fc7600D0E61Ed40E8","0xEB3f232798D78bd4106f6F7772887Ca4a5C6aDb3","0x4821A889Cefd35d62b9d3abB5abAA4D8caF44279","0x5b9AFC307ef3dbbF2aF821DDD644607296ee6d11","0xf027C380A4BfDab0F8d8711B4E5CceAEaCEc0133","0x95aB8aF632d2a13f77FC9B7e8507F6d8019ed8F2","0x28080C8C058AAd81f41BEF4A11F312c7022076c7","0x3489a758B68F6Fc0bB00A26E0127d897BE4Bc2aa","0x51B1ED7328B9BDcC1160B5429Da83F2AC4746864","0x3CD1CC0f6aACc32CAcE93E18Ce309Fe60d85F3Ab","0xE165C5881aA7B541986D9A3Ca7c4C3EA500B4397","0x8dcC6a44eAC36D5Af6DceDC8c77f004fb9164CF4","0xF89186EC8190603E8C10586F7d0ED4F5B03B889e","0x6917ed19eFD0fB916573cb04E499c38E523D0244","0xad3B5e58A35590791818952Dda78CE90a5f66B27","0xE4DceaE39622C884F0c41C73C90D3BeF8FA9A53e","0x52cadF38c9FEEb96446e952398eb7BFb2cB24BBD","0x2C616728E2Aebe0F7cD49973e15e2e5b751fCc03","0x1E86d2bF20Ff5D02eC9D5aB26927d0CA1Af36244","0x1488b2e65B061E93652ce3957D1901269bb8880D","0x81e8e6Aa32B3EC88bF067F0f9851d340fb74eda2","0x661a95999e0b7DE4C3802111B8f66FD50Ad4E917","0x173c65d1c429FBd4d333A56a96428EAF4e8D15Bc","0xc38eF62436126b5659d009E23360a92932df5830","0xF39df4BCdE887778cCfdA781311A98fB900Dca9f","0x7CD9f16fc1eEb62B025038118FEa83c7498D87cB","0x542a6E311F5bCa14a9a96E31f6FDE5DBc3c068b1","0x1a4d29f64187CdD817CAd9F667543926406FC5b9","0x4a3658b321143CEcC12237c2B99986C8b8a03B4e","0x53e3f5a48a15E18Fa687F27AE4D900977fe30CAc","0x9A29131d2bb6dDa7CE0fe07561Ec99a9e1b9f871","0x51745aFAAE9aEe153714165f39dF697b6239e37C","0xb74517b3EBDC8D5484Ec6afBB5EF19662D134819","0xDdBfc4e162629EC632288dd022BC401252208608","0x5Ec75B2Eb4d8c518e754E750EFfEB56e2F7C4F93","0x2B62ec817BDfF0B1A96eD6fdFb020284Bcddf053","0x400389acCAF0BCf76f2374032bD7498A05bbb64b","0x9D2B19A7FB301700D64AB2Cde8B9bC95Dd7AfaF6","0x2e7C072Ce9e76De442e4D148354C71D8D5C11CE8","0x3266F61299c6993920430c205ecF68ff3386782e","0x1AabC724DB632260776FA704c7e4AC07C39F891E","0x3D9BECb05E2fa26bAa72eFb4d534A09B95c0bf0B","0xf6223c131B22031427e29a3C4CFe856DCa728F22","0x073329f9c31ED860Eae26FB5f3DE3Ec2Fe6057a8","0x1EA2A6ACb27D03D74d1BC3F11563A5976Ca1fEEC","0xD28bF60382F8533bC62f1335f8CE07c2B76195Fc","0xC42DC01673609f01A8465921361A82C04e81E62b","0xfA2d867e7f227a53DE8c1B7f4823A95B971E6f7C","0x9F87aF06664Bfdf8cFe4afAE6a4c28DF805740d7","0x1082433B17FD5130cA03d72e3aAeAb59F46a4766","0x0FFADc6996CCaC03e6245de36bc529befdF1591d","0x2fD05ba9A4cfa30cf15e7aaC21E7Ff780dD2BEbF","0x4a6b93C41F4E9bbffcEf11F95eD8Bd6533647eeb","0xB7B1F6634d5C77E54671c80FB77A52C0e90090ff","0xA326AC13404A60FF8D4Efea91cf15b7Baf4664a8","0x2A8818a3269cE7Cdeb5f4D9c96538684A303cA03","0x56E21216D30468F31656A288ca702021ca1C2F1e","0xc757ebf4D126012155a87C323e75cD9Aaff5f587","0xa14cE165BE069d48722a80FCa52463e74A7405b2","0x1f76CBA43C73d9993A7197D70ce1f9951aC822D0","0xC123B7AC539302C7FF50481203fF3DF3B3CC9456","0x37c342c0529efC84f6Dc36c798BbDf3D446C37E0","0xb23B61C893cd40Cb3D44396a4AC32b8AA13feD0B","0x1e2Fa6be390A05946F8B10E748133A7528b52fea","0x6d7B28eB142f9f7169Dd0Dd2DF1b4b51166C46e7","0x98BaAf7F3314f3a658570Fc7af42C18f2614865e","0x39D8Ee091118Db4Cd25bbbf6506c5243c291AFD6","0xC120d19d4b34C9D26239f15AAb7aFd5819f9218B","0x9298517cA52374629300d9882C73173207f7d23a","0x94c53F2f016eC73E520b1e52c0AF1F6157456Eb7","0x100Be4FeAA8A983eb1d0d00C961F0d149524Fc45","0xAC741b25bF1fd1d3C42526F8bc3Eb1E8801C61E3","0x32a51641fa1504e45883bBC5C4cDB426dd8dB818","0x2aea0bC2D4C324d7250387f79D05a5e24cbA64cc","0x1aC620c73AF13c8cA2864CD0c89aa31D879064E1","0x6D2a127a4e4b1D45B8295f8f6e264b4dC90266CE","0xA3Fe10D8776e41400b21E454df228252Cd4EF46C","0x265d8Dfc8A0A61160Fa0a790DcD70f62Fd15c6f3","0xaf3AF614923C62e22AE44bb881C657Ba6bd8d37F","0xa2eC84eDB4F641DC2F5b028c4E8250EEa4156e5D","0x5983693e514e753AEA1550948F5E9F93aBf84B23","0x83EE1e73b8418E39449e24703771Ae396068FF65","0x95217A5E105F31A80BD0FE826c9FAC9430810647","0xF3EC30EC91b039DFAA2635f2f35e81De2ee5D4fe","0x17FDC9ebb02059108E4C5515D333226c1b656B00","0x87b52a96e5D18e351AAB5da5F3D73A96939d056E","0xc2f7e54F002ABE32062EE51D7DC7D5Ac5E4C8C13","0x921374d606C4958aFDB3cCa6c9aB710D4E323e8F","0x19425Ac2f39f4e80Bc07b2458f3610f7b0f562A9","0xb7d75d779d0c82e7c641c2467C550336eEaa78E6","0xD81193cC8f5C4994A553dEa57Af7Cc9e263fE4B1","0x014972bedEaFcdFD4499100033c05C5247251510","0x94A62E56440315c72896D1B2685F860a4aFEDFbb","0x10590437825dBb042F877ccBe0884d35fb276Da0","0x0678C75bE43543149eD305065529E0FF9C58E86f","0x8b8A8311cCcB4924AA8829EAA54907228f215fCf","0x539b6E3C2aC79DCbC4417C740161550eAca82Dfd","0x59826CbD434FAFbccC4C90B52D148C2734Ec37fd","0x4AF58aa4418F5de27dA4fe3E951C17222BCd4597","0xC8C633c410116B360B1A1751bfc6d4F4a76d6bA8","0xa013CFeD785c4276C40f37E90D21D480a812067F","0x2133e0dE5096e6E5eE04896DD52C7AfCDe2176b4","0x7955b43E3dF220734Df4E0d933eFd21bF2bF28DD","0x4C0DE8e769aDb06185fbd7993427C4680CF1c664","0x79E235e062AF12Cce304531dcCD7826BaA7d4220","0xa05491c3E06264Ba54F0bf9e976F25F92Ac29b0A","0x7a11B914C227129D8B67849E68eC04cF712B8A61","0x053BB70c9a2bA26A0B9F27b586d107C376Fe5796","0x4fD7df3cB464E79bDBA3af3B00c85A417bf9F039","0x767DddD35B0Cb3FA80CA0C12eedc250ec5B55E52","0x2565050C72537c65D6bc3166322305356Ca972D8","0xC44a54B25eFa9CB0D1Ad848BE300d5E6a02aD147","0x8369A9F54B60d3b1C37aB98AA7EE2a4F57db0CA7","0xF86cd1a4441404860093B8514e438035187eB355","0xEa3207095dB89Eef74eFA8539DF1c784DC161F67","0xF87E34D1476A682cE11CeFb5828322b2c3269dC8","0xbe2884F90B8C87a4e4777Ec529EF5D91231FF476","0xB0f78DE9CB660a4514fb5d7B242D73B6ae662423","0x063CaDB042FD6c4187459Fedf571b23cC991097D","0xC7acADA3e7EEE1d4e83526Da0aDE6ba03696612F","0xd6cB7B067252da20c448fc59F170BBc6F23CA047","0x65a9B94C52Eb00bBA3F37Fc093B6A41280F714E8","0x07C4c855be1E9E4C998CD6504025496fD0839378","0x96fb7E95423CccC5748B401CbaDBcF0d358E1B85","0xD488048Ae4d91742C695A222e92532BB347384cf","0x709cFbb072CBf31f96C44Cb3D4D4381450F98333","0xB2ef98437EB48A242F463530dE979967824861dF","0x3616AEff55486312Dbf433703c90D985D851F3E6","0xE9372679f637223456812fC24c0b4598673A0B38","0x6A300050987D3515918228BF7019646b3C1C12F6","0xC3e6770a1be5152e616524946f6C51839A290A7d","0xe2a1e2B0e52587E51a170dd5f23127DAad654a8D","0xCE37aa1C90326799F8f835F2B548Ee908BacD5B6","0x513D4d58bc41948e3C188e2d079008c6D8F29bC8","0xd03E1E49163738EF78a95C177bBF440e02dEE4B3","0x6F9E40C168f3f7aC64184b194C068A665C3fF459","0xb5a3b246E1fbf17106b684C48412EbBA77320304","0x3096141797fFEc188F44f5596759e52C80aEb719","0x538EE11412e496773248479aD2e2B105ece279A1","0x950Ae41762ce4122370D8FcdE36bed450d0767Cc","0x3bd84F9255eBc8ae5E2367f1578c13a6f7176cb1","0xa619e0c6EECbe70410a60a8C932B6D4119825562","0x386cAa37d4A46AC875eC40DA37F8632596496Bdc","0x7F4e8F899a7d561C78ecb0F4a0Aa94c8c215c05e","0x090701e8dcFd07AAF222a0bcb8a886f0DF0Aa270","0xec49C6A45dD396bf85b9c97E026C298439B87650","0xcE2161C2855f4E14Ac5cc99f98Ab7Ffd85329d0c","0xB4D6d1025EE0090eCCe0Eb3017c22e82c4a4A50b","0x99405Deb3652A8d61C5E1bb4af4a647e3175E01c","0x1617Ef382f7DA076e1B70F15ed1a01Fd5F15310D","0xA8FF4C9db53D52c8cBFfeC08e2d82383f443f562","0x699c6999878ad678BB5CC4F2Cc3Ece8E0Fe7B548","0x9A18390b2Db5370C66509625708cC1C0bB80CE9c","0x6bC52D02a7b99eF9B3FE44a43F3C957E6fa1df85","0xa1088F76dA44780992FF870148D0bEe6982246aE","0x67e748E64dC796C0C70e9B1860e2Eae628D7B040","0x65faD9CDAC5B220727e82d0D96C0c5786BBe81B9","0x1BE611a243c11e2FF8658C91E5B87Ff791E30C6f","0xC98205874095881564f472A7bcCb4a2146901b99","0xEB8AA6250669dCf5182F6fb4883E7510D9908881","0x09BB32e51D4bb9b6350356dE5F3616bE5A509f4D","0x9e500334888B419A76bB7fCD18Af3eBbf650E008","0x4E0335FB628dF4f4f5388e6bBdD77B02D1Bf761c","0x8637e669f0FbA2c2747629FCeBc8ea3CC2029470","0x5eb7781a00cC466B34e838b8299e0EACb1F429c7","0x5Da83d5968c2A1daEE056991a89557AC8ad3f426","0x38C329E8BC2aB7B37f6F6dD98988411347D6426E","0x71F10269965AB68719d57A85BECFF427cb1a098A","0x50997D336843091673488409DEd7B53b5aD99068","0x9c0A5Bb7471612C2b8aeD71f673033B804969511","0xC8A3de9c62a9435E100827142be084D7264513EF","0x400fDAa98C40d0E332d2e89Cd62842E2c1644910","0x4a4b4A775E3d8616BB5726078d0a31Bf6c3F2535","0x30FBBdA8b0CD6925a3Cb58aEF0a1A8A160F713a5","0x6eEf9fbc3dBa1988970c28e3F5Ce3A5e1dF4C65c","0x2F146F46026EEeeA27D8FdfaeDf066774b03C6c8","0x32eeDBcacd143434BF5A8a698030Fbda91803E23","0x61e7534c561c64fD48BEA907229f67BF339ea955","0x7cD07452e8B93602d87e019F5D6f8Be2397d3770","0x071ebE7a69CE2449509Fddd697A31C1FA07658fC","0x92dfd0DFC04De47EE792d82AD5686b395f033b74","0xf8ecD415222A0c7bb7d0C8563DAb4AB3EA5A3457","0x25F138A58860d5AA1A910b51B1c81166d82a2CDF","0x54519AA8aec2ae7Cd9ED0C1Bb0feD78bB5519dfd","0x958f30A0E86ffC4eB8B9F3832C6BD8Ccd49bC1D5","0xa52C777eF6D18c9274Ea7157D97f99c674a2e3C0","0xf675C6efD68cd1016AE5092e05548f8E271555eC","0x5Da04564F595Ad1026C975cd7605AdB0F20F0902","0xd3865bdbc08979CF0869F3E0a1af1dD4aaF17B88","0xDc7c6765B7656c48F1dAD16413bEcF0CB157d7a9","0x91426F9856be1845D1d3401aE0290BDf1785d19A","0xcaD9a06e0264bc336A090bc1C6fD315e86904a3b"];


// Main function to process each addresssync function claimFaucet(address) {
  const url = `${endpoint}?token=${token}${proxyString}${optionsString}`;

  const body = {
    query: `
      mutation ClaimFaucet {
        goto(url: "https://faucet.gnosischain.com/") {
          status
        }
        type(text: "${address}", selector: "#address") {
          time
        }
        verify(type: cloudflare) {
          solved
        }
        waitForTimeout(time: 2000) {
          time
        }
        click(selector: "button[type='submit']") {
          time
        }
        longwait: waitForTimeout(time: 5000) {
          time
        }
      }
    `,
    operationName: "ClaimFaucet"
  };

  try {
    const response = await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body),
      timeout: 30000 // optional: only works if using node-fetch
    });

    const text = await response.text();

    try {
      const json = JSON.parse(text);
      console.log(`✅ Success for ${address}:`, JSON.stringify(json, null, 2));
      await new Promise(resolve => setTimeout(resolve, 5000));
    } catch {
      console.error(`❌ Failed for ${address}: Not valid JSON\nResponse:\n${text}`);
    }
  } catch (error) {
    console.error(`❌ Failed for ${address}: ${error.message}`);
    await new Promise(resolve => setTimeout(resolve, 30000));
  }
}

(async () => {
  for (const address of addresses) {
    console.log(`\n--- Processing address: ${address} ---`);
    await claimFaucet(address);
    await new Promise(resolve => setTimeout(resolve, 4000)); // Wait 4 seconds before next
  }
})();
